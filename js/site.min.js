function getAkendiNS(){var t="1dd7e0c5-9f39-411e-a551-bdab7d917f83";return"object"==typeof window[t]?window[t]:window[t]={UUID:t}}var supportPageOffset=void 0!==window.pageXOffset,isCSS1Compat="CSS1Compat"===(document.compatMode||""),animationEvent=function(){var t,e=document.createElement("testelement"),n={animation:{end:"animationend",start:"animationstart"},webkitAnimation:{end:"webkitanimationend",start:"webkitanimationstart"},mozAnimation:{end:"animationend",start:"animationstart"},oAnimation:{end:"oanimationend",start:"oanimationstart"},msAnimation:{end:"msanimationend",start:"msanimationstart"}};for(t in n)if(void 0!==e.style[t])return n[t]}();function getScreenOrientationProperty(){return screen.msOrientation||screen.mozOrientation||screen.orientation||null}function getWindowOrientationProperty(){return window.orientation||null}function hasOrientation(){return null!==getScreenOrientationProperty()?"screen":null!==getWindowOrientationProperty()?"window":void 0}"ontouchstart"in document.documentElement||(document.documentElement.className+=" no-touch");var mqTabletMobi=window.matchMedia("(max-width: 639px)"),mqTabletXS=window.matchMedia("(max-width: 1023px)"),mqTabletSM=window.matchMedia("(max-width: 1365px)"),mqDesktopMD=window.matchMedia("(max-width: 1803px)"),mqDesktopLG=window.matchMedia("(max-width: 2523px)");function isMobi(){return mqTabletMobi.matches}function isXS(){return mqTabletXS.matches&&!mqTabletMobi.matches}function isMaxXS(){return mqTabletXS.matches}function isSM(){return mqTabletSM.matches&&!mqTabletXS.matches}function isMaxSM(){return mqTabletSM.matches}function isMD(){return mqDesktopMD.matches&&!mqTabletSM.matches}function isMaxMD(){return mqDesktopMD.matches}function isLG(){return mqDesktopLG.matches&&!mqDesktopMD.matches}function isMaxLG(){return mqDesktopLG.matches}function getPageXOffset(){return supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft}function getPageYOffset(){return supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop}function getClientWidth(){return document.documentElement.clientWidth||document.body.clientWidth}function replaceElementClass(t,e,n){"object"==typeof t&&null!==t&&(t.classList.remove(n),t.classList.add(e))}function removeElementClasses(t,e){if(null!==t)for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)t[n].classList.remove(e[i])}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},Date.now||(Date.now=function(){return(new Date).getTime()});
// Work in progress, some functions that should be here may be in 
// Work section Case Study pages related functions

// define global functions from  here for eslint as needed, see
// top of  for example
/* global getAkendiNS */

// Get access to the  namespace object (or make an empty default if it
// doesn't exist)
var Akendi = getAkendiNS();

/** Akendi.SetTopPhotoBg
    Find elements with .c-workCaseStudy__TopPhoto* class and use data-bgcolor
    attribute to set the background color of the element

    @returns undefined
*/
Akendi.setTopPhotoBg = function() {
  document.querySelectorAll('[class^=c-workCaseStudy__TopPhoto]').forEach(
    function(node /*, idx, nodeList*/) {
      var colorAttrib = 'data-bgcolor';

      if (node.hasAttribute(colorAttrib)) {
        node.style.backgroundColor = node.getAttribute(colorAttrib)
          .replace(/[^#0-9a-f]/gi, "");
      }
    }
  );
}

var mx,Akendi=getAkendiNS();function handleBackToTopDisplay(){var e=document.querySelector(".j-backToTop__Trigger");Akendi.bTTEl=document.querySelector("[class*=c-backToTop]"),null!==e&&null!==Akendi.bTTEl&&(Akendi.bTTShowPos=e.getBoundingClientRect().bottom+getPageYOffset()-window.innerHeight,Akendi.bTTProcessing=!1,window.addEventListener("scroll",function(){var e,t=window.scrollY;Akendi.bTTProcessing||(requestAnimFrame((e=t,function(){e>=Akendi.bTTShowPos?(Akendi.bTTEl.classList.add("c-backToTop--on"),requestAnimFrame(function(){Akendi.bTTEl.classList.add("c-backToTop--visible"),Akendi.bTTProcessing=!1})):(Akendi.bTTEl.classList.remove("c-backToTop--visible"),window.setTimeout(function(){Akendi.bTTEl.classList.remove("c-backToTop--on"),Akendi.bTTProcessing=!1},350))})),Akendi.bTTProcessing=!0)}))}function getElementByIdFromAttrib(e,t){return null!=e&&"string"==typeof t&&0<t.length&&"function"==typeof e.hasAttribute&&e.hasAttribute(t)?document.getElementById(e.getAttribute(t)):null}function enableClientsListToggle(){if(0<document.querySelectorAll(".j-clientsList").length){for(var e=document.querySelectorAll(".c-clientsList__Toggle"),t=0;t<e.length;t++){e[t].setAttribute("aria-expanded","false"),e[t].classList.add("j-clientsList__Toggle--closed"),e[t].hasAttribute("data-closed")&&(e[t].hasAttribute("data-open")||e[t].setAttribute("data-open",e[t].src),e[t].src=e[t].getAttribute("data-closed"));var n=getElementByIdFromAttrib(e[t],"aria-controls"),s=e[t].parentElement.classList.contains("c-clientsList__Title")?e[t].parentElement:null;if(null!==s&&s.classList.add("j-clientsList__Title--closed"),null!==n){var a=n.getBoundingClientRect().height,o=window.getComputedStyle(n);a+=parseFloat(o.getPropertyValue("margin-top"))+parseFloat(o.getPropertyValue("margin-bottom")),n.style.height=a+"px",n.classList.add("j-clientsList__Items--closed")}}document.body.addEventListener("click",handleClientsListToggle),document.body.addEventListener("akenditap",handleClientsListToggle),Akendi.clientsListToggleEnabled=!0}}function disableClientsListToggle(){if(0<document.querySelectorAll(".j-clientsList").length){document.body.removeEventListener("click",handleClientsListToggle),document.body.removeEventListener("akenditap",handleClientsListToggle);for(var e=document.querySelectorAll(".c-clientsList__Toggle"),t=0;t<e.length;t++){e[t].setAttribute("aria-expanded","true"),e[t].classList.remove("j-clientsList__Toggle--closed");var n=getElementByIdFromAttrib(e[t],"aria-controls"),s=e[t].parentElement.classList.contains("c-clientsList__Title")?e[t].parentElement:null;null!==s&&s.classList.remove("j-clientsList__Title--closed"),null!==n&&(n.style.height="",n.classList.remove("j-clientsList__Items--closed"))}Akendi.clientsListToggleEnabled=!1}}function manageClientsListToggle(){return isMaxXS()?void 0!==Akendi.clientsListToggleEnabled&&Akendi.clientsListToggleEnabled||enableClientsListToggle():void 0!==Akendi.clientsListToggleEnabled&&Akendi.clientsListToggleEnabled&&disableClientsListToggle(),void 0!==Akendi.clientsListToggleEnabled&&Akendi.clientsListToggleEnabled}function handleClientsListToggle(e){var t=null,n=null,s=null,a="j-clientsList__Toggle--closed",o="j-clientsList__Title--closed",i="j-clientsList__Items--closed";e.target.classList.contains("c-clientsList__List")||e.target.classList.contains("c-clientsList__Title")?s=e.target.querySelector(".c-clientsList__Toggle"):e.target.classList.contains("c-clientsList__Toggle")&&(s=e.target),null!==s&&(t=getElementByIdFromAttrib(s,"aria-controls"),n=s.parentElement.classList.contains("c-clientsList__Title")?s.parentElement:null,s.classList.contains(a)?(s.classList.remove(a),s.setAttribute("aria-expanded","true"),s.hasAttribute("data-open")&&(s.src=s.getAttribute("data-open")),null!==n&&n.classList.remove(o),null!==t&&t.classList.remove(i)):(s.classList.add(a),s.setAttribute("aria-expanded","false"),s.hasAttribute("data-closed")&&(s.src=s.getAttribute("data-closed")),null!==n&&n.classList.add(o),null!==t&&t.classList.add(i)))}function checkWorkElementsOrder(){var e=document.querySelector(".j-caseStudyCTA"),t=document.querySelector(".c-workContentCarousel__OuterWrapper"),n=document.querySelector(".c-workContentCarousel"),s=document.querySelectorAll(".c-workContentCarousel__description"),a=!1,o=window[Akendi.workCarouselUUID],i=0;if(null!==e&&null!==n)if(isMaxXS()){var c=null!==t?t:n;e.nextElementSibling!==c&&(c.parentElement.insertBefore(e,c),a=!0)}else{var l=null!==t?t:n;void 0!==o&&void 0!==o.timeEl&&(l=o.timeEl),l.nextElementSibling!==e&&(l.insertAdjacentElement("afterend",e),a=!0)}if(0<Akendi.cache.workHomeCarousel.length){var r=document.querySelectorAll(".c-workContentCarousel__slide");for(i=0;i<r.length;i++){var d=r[i].querySelector(".c-workContentCarousel__learnMore--style2");if(null!==d){var u=r[i].querySelector(".c-workContentCarousel__label"),p=r[i].querySelector(".c-workContentCarousel__photo--style2");"a"===p.parentElement.tagName.toLowerCase()&&(p=p.parentElement);var h=r[i].querySelector(".j-workContentCarousel__titleWrap");null!==u&&null!==p&&null!==h&&(isMaxXS()||isSM()&&document.documentElement.clientHeight<800?(u.insertAdjacentElement("afterend",h),h.insertAdjacentElement("afterend",d)):u.insertAdjacentElement("afterend",p))}}}if(0<s.length){var f="beforebegin";for(isMaxXS()&&(f="afterend"),i=0;i<s.length;i++){var g=s[i].parentElement.querySelector(".c-workContentCarousel__photo--inner");if(null!==g){var _=g.parentElement.nodeName.toLowerCase();"a"!==_&&"p"!==_||(g=g.parentElement),("beforebegin"===f&&s[i].nextElementSibling!==g||"afterend"===f&&g.nextElementSibling!==s[i])&&(g.insertAdjacentElement(f,s[i]),a=!0)}}}a&&void 0!==o&&o.enabled&&(disableWorkCarousel(),enableWorkCarousel())}function hidePopup(e){e.stopPropagation(),e.preventDefault();var t,n=e.currentTarget.parentElement;if(null!==n&&n.classList.contains("j-popup")){for(var s=RegExp("^j-popup__on(?:--\\w+)?$"),a=n.className.split(" "),o="",i=0;i<a.length;i++)if(s.test(a[i])){o=a[i];break}""!==o&&(n.classList.remove(o),setTimeout((t=n,function(){t.classList.remove("c-popup--show");var e=t.parentElement;null!==e&&e.classList.contains("c-popup__wrapper")&&e.classList.remove("c-popup--show")}),500))}}function showPopup(e,t){if(null!==e&&e.classList.contains("j-popup")){var n=e.parentElement;null!==n&&n.classList.contains("c-popup__wrapper")&&n.classList.add("c-popup--show"),e.classList.add("c-popup--show"),"string"==typeof t&&requestAnimFrame((s=e,a=t,function(){s.classList.add(a)}))}var s,a}function initPopups(){var e=Array.prototype.slice.call(document.querySelectorAll(".j-popup"));if(0<e.length){for(var t=Array.prototype.slice.call(document.querySelectorAll(".c-popup__close")),n=0;n<t.length;n++)t[n].addEventListener("click",hidePopup);var s=e.filter(function(e){return e.classList.contains("c-popup--teddeUX")});0<s.length&&(s=s[0],isMobi()?showPopup(s,"j-popup__on--teddeUX"):(Akendi.popupProcessing=!1,Akendi.teddeUXShown=!1,window.addEventListener("scroll",function(){var e;Akendi.lastScrollPos=window.scrollY,Akendi.teddeUXShown||Akendi.popupProcessing||(requestAnimFrame((e=s,function(){100<Akendi.lastScrollPos&&(showPopup(e,"j-popup__on--teddeUX"),Akendi.teddeUXShown=!0),Akendi.popupProcessing=!1})),Akendi.popupProcessing=!0)})))}}function attachGATrackingToDownloads(){if("undefined"!=typeof ga){$(["pdf","mp3"].map(function(e){return'[href$="'+e+'"]'}).join(",")).on("click",function(){ga("send","pageview",$(this).attr("href"))})}}function handleContactValidity(){var t=$("#contactDiscussEmail"),n=$("#contactDiscussName"),e=$("#contactUsContactForm"),s=/^[^\x00-\x1f\x7f!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~]+$/,a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,o=/^\s*$/,i=null,c=null;function l(){return s.test(n.val())&&!o.test(n.val())}function r(){var e=t.val();return void 0!==t.get(0).checkValidity?t.get(0).checkValidity()&&!o.test(e):a.test(t.val())&&!o.test(e)}n.length&&n.on("blur",function(){null!==i&&(clearTimeout(i),i=null),i=l()?setTimeout(function(){$(".c-contactUs__Warning--name").stop().fadeOut("fast")},500):setTimeout(function(){$(".c-contactUs__Warning--name").stop().fadeIn("fast")},500)}),t.length&&t.on("blur",function(){null!==c&&(clearTimeout(c),c=null),c=r()?setTimeout(function(){$(".c-contactUs__Warning--email").stop().fadeOut("fast")},500):setTimeout(function(){$(".c-contactUs__Warning--email").stop().fadeIn("fast")},500)}),e.length&&$(".c-contactUs__InputSubmit").on("click",function(){if(n.add(t).trigger("blur"),!l()||!r())return!1;var e=$("#contactUsContactForm").serialize();return $.post("/include/common/php/contactus_submit.php",e,function(e){processContactFormResult(e)},"json").fail(function(){processContactFormResult({error:-1,msg:["Oops! Something didn't quite work there.","Please contact us by e-mail: contact@akendi.com"]})}),$(".c-contactUs__FillIn").html("&hellip;"),$(".c-contactUs__HowHelpDrop").removeClass(".c-contactUs__HowHelpDrop--selection"),$("#contactDiscussType").attr("value",""),!1})}function handleCustomDropdownClick(){var l=["c-workDropdown__Wrapper","c-contactUs__HowHelpBlock"],e=["c-workDropdown","c-contactUs__HowHelpDrop"],r=["c-workDropdown__Box","c-contactUs__HowHelpDropBox"],d=["c-workDropdown__Link","c-contactUs__HowHelpLink"],u="aria-expanded",p="--open";function h(e){for(var t=e.parentElement.querySelectorAll('[role="option"]'),n=0;n<t.length;n++)t[n]===e?t[n].setAttribute("aria-selected","true"):t[n].removeAttribute("aria-selected")}function f(){var e=location.search;if(""!==e&&"?"!==e){var t=e.slice(1).split("&");if(0<t.length)for(var n=0;n<t.length;n++){var s=t[n].split("=");if("f"===s[0])return s[1]}}return""}function g(a,o,i,c,l){return function(e){if(e.preventDefault(),e.stopPropagation(),o.classList.toggle(i),a.classList.toggle(c)){if(a.setAttribute(l,"true"),o.focus(),null===o.querySelector("[aria-selected]")){var t=o.querySelector('[role="option"]');if(o.classList.contains(r[0])){var n=f();""===n&&(n="everything");var s=Array.from(o.querySelectorAll('[role="option"]')).filter(function(e){return e.querySelector("a[data-type]").getAttribute("data-type")===n});0<s.length&&(t=s[0])}null!==t&&t.setAttribute("aria-selected",!0)}}else a.removeAttribute(l),o.blur()}}function _(s){return function(e){if(e.target.classList.contains("c-workDropdown__Link")){if(e.preventDefault(),!e.target.hasAttribute("data-type"))return;var t=e.target.getAttribute("data-type").replace(/[^a-z-]/gi,"").trim(),n=f();""===n&&(n="everything"),t!==n?("everything"===t&&(t=""),location.search="f="+t):s.click()}}}document.body.addEventListener("click",function(){e.forEach(function(e,t){var n=document.querySelectorAll("."+e);if(0<n.length)for(var s=0;s<n.length;s++){for(var a=n[s];null!==(a=a.parentElement)&&!a.classList.contains(l[t]););if(null!==a){var o=a.querySelector("."+r[t]);n[s].classList.remove(e+p),n[s].removeAttribute(u),null!==o&&o.classList.remove(r[t]+p)}}})}),e.forEach(function(e,i){var t=document.querySelectorAll("."+e);if(0<t.length)for(var n=0;n<t.length;n++){for(var s=t[n];null!==(s=s.parentElement)&&!s.classList.contains(l[i]););if(null!==s){var a=s.querySelector("."+r[i]),o=e+p,c=r[i]+p;if(null!==a)switch(a.addEventListener("click",function(e){e.stopPropagation()}),t[n].addEventListener("click",g(t[n],a,c,o,u)),a.addEventListener("keydown",function(e){var t=e.which||e.keyCode,n=this.querySelector('[role="option"][aria-selected]');if(null!==n){var s,a,o;switch(t){case 38:case 40:if(e.preventDefault(),38===t)for(s=n;null!==(s=s.previousElementSibling)&&!s.hasAttribute("role")&&"option"!==s.getAttribute("role"););else for(s=n;null!==(s=s.nextElementSibling)&&!s.hasAttribute("role")&&"option"!==s.getAttribute("role"););null!==s&&h(s);break;case 36:case 35:e.preventDefault(),36===t?s=this.querySelector('[role="option"]'):(s=null,0<(a=this.querySelectorAll('[role="option"]')).length&&(s=a[a.length-1])),null!==s&&h(s);break;case 13:e.preventDefault(),null!==(o=n.querySelector("."+d[i]))&&o.click()}}}),r[i]){case"c-contactUs__HowHelpDropBox":a.addEventListener("click",function(e){var t;if(e.target.classList.contains("c-contactUs__HowHelpLink")){e.preventDefault();var n=e.target.parentElement;if(null!==n&&n.hasAttribute("role")&&"option"===n.getAttribute("role")){var s=n.parentElement;if(null!==s){var a=s.querySelectorAll('[role="option"]');for(t=0;t<a.length;t++)a[t]===n?a[t].setAttribute("aria-selected","true"):a[t].removeAttribute("aria-selected")}}var o=e.target.getAttribute("data-type"),i=document.querySelector(".c-contactUs__Blurb--"+o),c=document.querySelector(".c-contactUs__HowHelpDiscuss"),l=document.querySelector(".c-contactUs__DiscussIntro--result"),r=document.getElementById("contactDiscussType"),d=document.querySelector(".c-contactUs__FillIn"),u=document.querySelector(".c-contactUs__HowHelpDrop"),p="c-contactUs__HowHelpDiscuss--open",h=e.target.textContent;if(null!==l&&(l.style.display="none"),null!==i&&null!==c&&(!c.classList.contains(p)||o!==r.getAttribute("value"))){var f=i.parentElement;if(null!==f){var g=f.children;for(t=0;t<g.length;t++)g[t]===i?g[t].style.display="block":g[t].style.display="none";c.classList.add(p),isMobi()&&scrollToY($(".c-contactUs__HowHelpDrop").position().top),r.setAttribute("value",o),0!==h.indexOf("UX")&&(h=h.toLowerCase()),null!==d&&(d.textContent=h),null!==u&&u.classList.add("c-contactUs__HowHelpDrop--selection")}}null!==u&&u.click()}});break;case"c-workDropdown__Box":a.addEventListener("click",_(t[n]))}}}}),$(".c-contactUs__Input, .c-contactUs__InputArea").on("focus",function(){void 0===$(this).data("placeholderText")&&$(this).data("placeholderText",$(this).attr("placeholder")),$(this).attr("placeholder",""),$(this).prev("label").addClass("c-contactUs__InputLabel--show")}),$(".c-contactUs__Input, .c-contactUs__InputArea").on("blur",function(){var e=$(this).prev("label");void 0!==$(this).data("placeholderText")&&$(this).attr("placeholder",$(this).data("placeholderText")),""===$(this).val()&&e.removeClass("c-contactUs__InputLabel--show")})}function handleContactDropdown(){var s="aria-expanded",a="c-contactUs__HowHelpDrop--open",o="c-contactUs__HowHelpDropBox--open";$("body").on("click",function(){$(".c-contactUs__HowHelpDrop").removeClass(a).removeAttr(s),$(".c-contactUs__HowHelpDropBox").removeClass(o)}),$(".c-contactUs__HowHelpDrop").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),n=$(".c-contactUs__HowHelpDropBox");t.toggleClass(a),n.toggleClass(o),t.hasClass(a)?(t.attr(s,"true"),n.focus(),0===n.children("[aria-selected]").length&&n.children('[role="option"]').first().attr("aria-selected",!0)):(t.removeAttr(s),n.blur())}),$(".c-contactUs__HowHelpDropBox").on("click",function(e){e.stopPropagation()}),$(".c-contactUs__HowHelpDropBox").on("keydown",function(e){var t=e.which||e.keyCode,n=$(this).children('[role="option"]').filter("[aria-selected]");if(0!==n.length){var s;switch(t){case 38:case 40:e.preventDefault(),0<(s=38===t?n.prev('[role="option"]'):n.next('[role="option"]')).length&&a(s);break;case 36:case 35:e.preventDefault(),0<(s=36===t?$(this).children('[role="option"]').first():$(this).children('[role="option"]').last()).length&&a(s);break;case 13:e.preventDefault(),n.find(".c-contactUs__HowHelpLink").click()}}function a(e){e.siblings('[role="option"]').removeAttr("aria-selected").end().attr("aria-selected","true")}}),$(".c-contactUs__HowHelpDropBox").on("click",".c-contactUs__HowHelpLink",function(e){e.preventDefault(),$(this).parent('[role="option"]').attr("aria-selected","true").siblings('[role="option"]').removeAttr("aria-selected");var t=$(this).attr("data-type"),n=$(".c-contactUs__Blurb--"+t),s=$(".c-contactUs__HowHelpDiscuss"),a="c-contactUs__HowHelpDiscuss--open",o=$(this).text();$(".c-contactUs__DiscussIntro--result").hide(),0<n.length&&(s.hasClass(a)&&t===$("#contactDiscussType").attr("value")||(n.siblings("span").hide(),n.show(),s.addClass(a),isMobi()&&scrollToY($(".c-contactUs__HowHelpDrop").position().top),$("#contactDiscussType").attr("value",t),0!==o.indexOf("UX")&&(o=o.toLowerCase()),$(".c-contactUs__FillIn").text(" "+o),$(".c-contactUs__HowHelpDrop").addClass("c-contactUs__HowHelpDrop--selection"))),$(".c-contactUs__HowHelpDrop").click()}),$(".c-contactUs__Input, .c-contactUs__InputArea").on("focus",function(){void 0===$(this).data("placeholderText")&&$(this).data("placeholderText",$(this).attr("placeholder")),$(this).attr("placeholder",""),$(this).prev("label").addClass("c-contactUs__InputLabel--show")}),$(".c-contactUs__Input, .c-contactUs__InputArea").on("blur",function(){var e=$(this).prev("label");void 0!==$(this).data("placeholderText")&&$(this).attr("placeholder",$(this).data("placeholderText")),""===$(this).val()&&e.removeClass("c-contactUs__InputLabel--show")})}function processContactFormResult(e){e.hasOwnProperty("error")&&e.hasOwnProperty("msg")?(Akendi.contactReturn=e.error,Akendi.contactRetMessage=e.msg):(Akendi.contactReturn=-2,Akendi.contactRetMessage=["Oops! Something didn't quite work there.","Please contact us by e-mail: contact@akendi.com","Script error - Type 2"]),$(".c-contactUs__HowHelpDiscuss").removeClass("c-contactUs__HowHelpDiscuss--open");var t=$(".c-contactUs__DiscussIntro--result"),n="c-contactUs__DiscussIntro--error";if(Array.isArray(Akendi.contactRetMessage)){t.text("");for(var s=0;s<Akendi.contactRetMessage.length;s++)t.append("<p>"+Akendi.contactRetMessage[s]+"</p>")}else t.text(Akendi.contactRetMessage);0!==Akendi.contactReturn?t.addClass(n):t.removeClass(n),t.show()}function handleTeamImgHover(){$(".c-teamMember__PhotoLink").hover(function(){isMobi()||$(this).find(".c-teamMember__PhotoFade, .c-teamMember__Quote").show()},function(){isMobi()||$(this).find(".c-teamMember__PhotoFade, .c-teamMember__Quote").hide()})}function handleTeamIconHover(){$(".c-teamMember__SocialLink").hover(function(){var e=$(this).find(".c-teamMember__SocialImg"),t=e.attr("src"),n=t.substr(0,t.lastIndexOf(".")),s=t.substr(t.lastIndexOf("."));e.attr("src",n+"Hover"+s),isMobi()||-1===t.indexOf("Blog")||$(this).parents(".c-teamMember__SocialRow").find(".c-teamMember__Blog").show()},function(){var e=$(this).find(".c-teamMember__SocialImg"),t=e.attr("src"),n=t.substr(0,t.lastIndexOf(".")),s=n.substr(0,n.lastIndexOf("H")),a=t.substr(t.lastIndexOf("."));e.attr("src",s+a),isMobi()||-1===t.indexOf("Blog")||$(this).parents(".c-teamMember__SocialRow").find(".c-teamMember__Blog").hide()})}function handleClearHeaderSpace(){$(window).on("load",function(){setTimeout(function(){var e=$(".c-header"),t=window.location.hash;if(0<e.length&&""!==t&&0<(t=$(t)).length){var n=e.height();isMaxSM()||(n=90);var s=t.offset().top-n;console.log(s),window.scrollTo(0,s)}},1)}),$(window).on("hashchange",function(){setTimeout(function(){var e=$(".c-header"),t=window.location.hash;if(0<e.length&&"#afterBanner"===t){t=$(t);var n=e.height();isMaxSM()||(n=90),window.scrollTo(0,t.offset().top-n)}},1)})}function handleSubNavHoverOrTouch(){var e=$(".c-nav__SubnavList--subCat.c-nav__SubnavList--style1"),s=$(".c-nav__SubnavList--subCat.c-nav__SubnavList--style2");if(e.length&&s.length){var a=e.find(".c-nav__SubListText"),o="c-nav__SubnavList--open",i="c-nav__SubListText--current";a.hover(function(){var e=$(this).attr("href").split("/"),t="";t=-1!==e.indexOf("ux-training")?null!==e.slice(-1)[0].match(/^\d+$/)?e.slice(-3).join("-"):"all-courses":e.slice(-2)[0];var n=$("#subNavList__"+t);n.length&&!n.hasClass(o)&&(s.filter("."+o).removeClass(o),n.addClass(o),a.filter("."+i).removeClass(i),$(this).addClass(i))}),e.doubleTapToGo({automatic:!1,selectorClass:"c-nav__SubListItem--alt"})}}function f_set_mobileClientsToggle(){var e=$(".c-clients__Toggle");e.length&&e.on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this),n=t.find(".h-hidden");t.toggleClass("c-clients__Toggle--open");var s=$(".c-clients__Categories");t.hasClass("c-clients__Toggle--open")?(s.slideDown(),n.text("Close")):(s.slideUp(),n.text("Open"))})}function handleFlatAccordionToggles(){$(".c-flatAccordion__Toggle").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this);t.parent().toggleClass("c-flatAccordion__Panel--closed"),t.toggleClass("c-flatAccordion__Toggle--closed"),t.hasClass("c-flatAccordion__Toggle--closed")?t.children("span.h-hidden").text("Open"):t.children("span.h-hidden").text("Close")})}function setWorkLeftNavStickyWatcher(){var n,s,a=document.querySelector(".j-leftSticky");null!==a&&"unlockTarget"in a.dataset&&(n=document.querySelector(a.dataset.unlockTarget),s=parseInt(window.getComputedStyle(a).getPropertyValue("top"),10),Akendi.workStickyLastPos=s,null!==n&&requestAnimFrame(function e(){var t=n.offsetTop-getPageYOffset()-a.offsetHeight-s;0<t&&(t=0),(t+=s)!==Akendi.workStickyLastPos&&(a.style.top=t+"px"),Akendi.workStickyLastPos=t,requestAnimFrame(e)}))}function setLockElementsOnScrollWatcher(){var c=$(".c-section__Head--userPersonasApproach"),l=$(".c-section__OurApproach--userPersonasLogo"),r=$(".c-section__ComplexApproachAndRelated"),d=$(".c-section__RelatedServices"),u=3336,p=3961,h=76,f=435;function g(){c.add(l).removeAttr("style")}c.length&&!function e(){var t,n=c.outerHeight(!0),s=l.outerHeight(!0),a=d.outerHeight(!0);if(isMaxXS())g();else{var o=$(".c-header").height();u=r.offset().top-o,h=o,p=isMaxMD()?(f=o+n+75,u+a-(n+s+75)):(f=h,u+a-(s+75));var i=getPageYOffset();u<i?i<p?function(){var e=r.offset().left;c.css({position:"fixed",top:h+"px",left:e+"px"}),l.removeAttr("style");var t=parseInt(l.css("left"),10),n={position:"fixed",top:f+"px",left:t+e+"px"};l.css(n)}():(t=Math.max(getPageYOffset()-p,0),c.css("top",h-t+"px"),l.css("top",f-t+"px")):g()}requestAnimFrame(e)}()}function updateProjectsCarousel(){Akendi.cache.projCarousel=$("#projectsCarousel");var e,t=1,n=1,s=Akendi.cache.projCarousel.find(".c-projectsCarousel__RecentProj").length;n=t=isMobi()?(Akendi.cache.projCarousel=$("#projectsCarousel--mobile"),s=Akendi.cache.projCarousel.find(".c-projectsCarousel__MobileLink > .c-projectsCarousel__RecentProj").length,1):isMaxXS()?3:isMaxSM()?5:isMaxMD()?6:9,Akendi.cache.projCarousel.data("slideStep",t),e=s-n,Akendi.cache.projCarousel.data("slideMax",e),0<s&&Akendi.cache.projCarousel.data("slideCount")>=s&&(Akendi.cache.projCarousel.data("slideCount",e),animateProjectsCarousel(),$(".c-projectsCarousel__Button--forward").addClass("c-projectsCarousel__Button--inactive"))}function configureProjectsCarousel(){if(Akendi.cache.projCarousel.length){Akendi.cache.projCarousel.data("slideCount",0),updateProjectsCarousel();var e=new Image,t=$("[class^=c-projectsCarousel__Button]");e.src="/include/common/images/img2017/controlPrevNextHover.svg",t.each(function(){$(this).data("baseSrc",$(this).attr("src"))}),Akendi.cache.carouselOver.length&&(Akendi.cache.carouselOver.each(function(e){var t=$(this).attr("data-for"),n=$("#"+t).position(),s=n.left;0<e&&(s+=10),$(this).css({left:s+"px",top:n.top+"px"})}),Akendi.cache.carouselOver.on("mouseenter",function(){$(this).addClass("in")}).on("mouseleave",function(){$(this).removeClass("in")}));var n="c-projectsCarousel__Button--inactive";t.on("mouseenter",function(){$(this).hasClass(n)||($(this).get(0).src=e.src)}).on("mouseleave",function(){$(this).hasClass(n)||($(this).get(0).src=$(this).data("baseSrc"))}),t.on("click",function(){var e=Akendi.cache.projCarousel.data("slideCount"),t=Akendi.cache.projCarousel.data("slideMax"),n=Akendi.cache.projCarousel.data("slideStep"),s="c-projectsCarousel__Button--inactive";$(this).hasClass("c-projectsCarousel__Button--back")?(0<e&&(e-=n,$(".c-projectsCarousel__Button--forward").removeClass(s)),e<=0&&($(this).addClass(s),e=0)):(e<t&&(e+=n,$(".c-projectsCarousel__Button--back").removeClass(s)),t<=e&&($(this).addClass(s),e=t)),Akendi.cache.projCarousel.data("slideCount",e),animateProjectsCarousel()})}}function animateProjectsCarousel(){var e=Akendi.cache.projCarousel.data("slideCount"),t=Akendi.cache.recentProjImg,n=t.get(0).width+10;t.animate({left:0-n*e+"px"},{complete:function(){Akendi.cache.carouselOver.each(function(e){var t=$(this).attr("data-for"),n=$("#"+t).position().left;0<e&&(n+=10),$(this).css({left:n+"px"})})}})}function smoothScrollAnchor(e){if(0<e.length){var t=e.attr("href"),n=window.location,s=n.protocol+"//"+n.host+n.pathname;e.attr("data-no-headspace");if(void 0!==t&&$(t).length&&(/^#/.test(t)||-1<t.indexOf(s))){var a=s+"#"+$(t).attr("id");void 0!==window.history&&window.history.pushState({},"",a);var o=$(".c-header"),i=$(t).offset().top;return o.length&&(i-=o.get(0).clientHeight),$("html, body").stop().animate({scrollTop:+i},800,"easeOutQuint"),!0}}return!1}function setNavCloseFocusHandler(){var e=$(".c-nav__Toggle"),t=$(".c-nav__Close");0<e.length&&0<t.length&&(e.on("focus",function(){var e=$(this).find(".c-nav__Open"),t=$(this).find(".c-nav__Close"),n=e.attr("src"),s=t.attr("src");n=n.slice(0,n.lastIndexOf("."))+"Focus.svg",s=s.slice(0,s.lastIndexOf("."))+"Focus.svg",e.attr("src",n),t.attr("src",s)}),e.on("blur",function(){var e=$(this).find(".c-nav__Open"),t=$(this).find(".c-nav__Close"),n=e.attr("src"),s=t.attr("src");n=n.slice(0,n.lastIndexOf("F"))+".svg",s=s.slice(0,s.lastIndexOf("F"))+".svg",e.attr("src",n),t.attr("src",s)}))}function initTabletBannerScrollFades(){var e="#animate_banner",c=document.querySelector(e),l=document.querySelector(e+" .c-banner__Keyword"),r=document.querySelector("#animate_banner .c-banner__Keyword--Alt"),d=document.querySelector("#animate_underline"),u=document.querySelector("#animate_banner .c-banner__Blurb"),p=document.querySelector("#animate_banner .c-banner__Blurb--alt"),h=document.querySelector("#animate_banner .c-banner__ScrollArrow"),f=document.querySelectorAll("#animate_banner .j-headline--alt"),g={opacity:1},_={opacity:0},m=0,v=1,C=2,k=350,b=420,w=560,A=!0,x=getClientWidth(),T=getPageYOffset(),y=108,S=150;!function e(){var t=!1;if(showHideScrollArrow(),!$(c).hasClass("j-noAnim")){var n=getClientWidth(),s=getPageYOffset();if(!A&&n===x&&s===T||(t=!0,T=s,w=(x=n)<1024?(y=108,S=150,k=220,b=250,350):1024<=x&&x<1366?(y=110,S=152,k=350,b=500,600):x<1804?(y=122,S=170,k=350,b=588,688):(y=177,S=245,k=350,b=560,660)),t&&!isMobi())if(T<C?$(d).css("width",y+"px"):$(d).css("width",S+"px"),T<=m)$(h).css($.extend({},g,{display:"block"})),$(l).css(g),$(r).css(_),$(d).css(g),$(u).css(g),$(p).css(_),$(f).css(g);else if(T<=v){var a=Math.max((v-T)/(v-m),0);$(h).css($.extend({},g,{display:"block"})),$(l).css({opacity:a}),$(r).css(_),$(d).css({opacity:a}),$(u).css({opacity:a}),$(p).css(_),$(f).css(g)}else if(C<T&&T<=k){var o=Math.min((T-C)/(k-C),1);$(h).css($.extend({},g,{display:"block"})),$(l).css(_),$(r).css({opacity:o}),$(d).css({opacity:o}),$(u).css(_),$(p).css({opacity:o}),$(f).css(g)}else if(b<T&&T<=w){var i=Math.max((w-T)/(w-b),0);$(h).css({opacity:i,display:"block"}),$(l).css(_),$(r).css(g),$(d).css(g),$(u).css(_),$(p).css(g),$(f).css({opacity:i})}else w<T&&($(h).css({display:"none"}),$(l).css(_),$(r).css(g),$(d).css(g),$(u).css(_),$(p).css(g),$(f).css(_))}A=!1,requestAnimFrame(e)}()}function setLogoSrc(e,t,n){void 0===n&&(n=1);var s=$("img.c-logo");if(s.length){var a=s.get(0),o=null,i=0,c=a.attributes;switch(n){case 1:a.src=a.src.replace(new RegExp(e),t);break;case 2:a.src=t.src;break;case 3:if(t.src!==a.src){for(o=$(t).clone(),i=0;i<c.length;i++)"src"!==c[i].name&&o.attr(c[i].name,c[i].value);s.replaceWith(o)}}}}function setHeaderClasses(e,t,n,s,a,o,i){var c=void 0!==o&&o,l=void 0!==i?i:"minmax",r=$(e),d=r.find(".c-nav__MaximizeRow"),u=r.find(".h-header").not(d),p=r.find(".c-logo"),h=r.find(".c-nav");c?(r.addClass(t),u.addClass(n),p.addClass(s),h.addClass(a),"minmax"===l?(d.removeClass("h-hidden"),setLogoSrc("",Akendi.cache.logoWhite,3)):(d.addClass("h-hidden"),setLogoSrc("",Akendi.cache.logoBlue,3))):(r.removeClass(t),u.removeClass(n),p.removeClass(s),h.removeClass(a),"minmax"===l?(d.addClass("h-hidden"),setLogoSrc("",Akendi.cache.logoBlue,3)):(d.removeClass("h-hidden"),setLogoSrc("",Akendi.cache.logoWhite,3)))}function getScrollWatchTarget(){var e=$(["#animate_banner",".c-jumboDiv__Wrap","[class^=c-jumboDiv__]","[class^=c-section__Intro]",".c-section__Title--intro",".c-leadArticle",".c-featuredBlog",".c-blog__ArticleImg",".c-blog__ArticleTitle",".c-banner__Level2",".c-contactUs__RowWrapper .h-subnavOffset__Level1"].join(",")).first();return e.length?"animate_banner"===e.attr("id")?380:166:null}function f_set_minNavToggle(){var e=$(".c-nav__Maximize"),t=e.closest(".c-header");e.length&&(e.on("mouseenter click",function(e){null!==Akendi.headHoverTimeout&&(clearTimeout(Akendi.headHoverTimeout),Akendi.headHoverTimeout=null),"click"===e.type&&e.preventDefault();var t=$(this).closest(".c-header"),n="c-header--open",s=!t.hasClass(n);t.length&&s&&setHeaderClasses(t,n,"h-header--open","c-logo--open","c-nav--open",s,"openclose")}),t.on("mouseenter",function(){null!==Akendi.headHoverTimeout&&(clearTimeout(Akendi.headHoverTimeout),Akendi.headHoverTimeout=null)}),t.on("mouseleave",function(){Akendi.headHoverTimeout=setTimeout(function(){if(Akendi.headHoverTimeout=null,!isMaxSM()){var e=$(".c-header"),t=getPageYOffset(),n=getScrollWatchTarget();null!==n&&0<=n&&e.length&&(setHeaderClasses(e,"c-header--open","h-header--open","c-logo--open","c-nav--open",!1,"openclose"),t<n?($(e).find(".c-nav__MaximizeRow").addClass("h-hidden"),setLogoSrc("",Akendi.cache.logoBlue,3)):e.hasClass("c-header--minimized")||(setHeaderClasses(e,"c-header--minimized","h-header--minimized","c-logo--minimized","c-nav--minimized",!0),setLogoSrc("",Akendi.cache.logoWhite,3)))}},500)}))}function doNavMinMax(){if(isMaxSM())setHeaderClasses($(".c-header"),"c-header--minimized","h-header--minimized","c-logo--minimized","c-nav--minimized");else{var e=getPageYOffset(),t=getScrollWatchTarget();if(null!==t&&0<=t){var n=$(".c-header"),s="c-header--minimized",a=!n.hasClass(s);t<=e&&n.length?a&&!n.hasClass("c-header--open")&&setHeaderClasses(n,s,"h-header--minimized","c-logo--minimized","c-nav--minimized",a):a||setHeaderClasses(n,s,"h-header--minimized","c-logo--minimized","c-nav--minimized")}}}function transitionMobileTopLevelName(){1<Akendi.cache.topLevelCategories.length&&(0<getPageYOffset()?Akendi.cache.topLevelCategories.addClass("c-nav__TopLevelName--showSub"):Akendi.cache.topLevelCategories.removeClass("c-nav__TopLevelName--showSub"))}function f_set_headerMinScrollWatch(){!function e(){doNavMinMax(),transitionMobileTopLevelName(),requestAnimFrame(e)}()}function f_set_subNavToggle(){var t=$(".c-nav__SubnavWrap"),n=$(".j-backplate");if(t.length){var e="c-nav__",s="--open",a=e+"Subnav",o=a+"Title",i=a+"Toggle",c=a+"ListWrap",l=e+"ToggleText",r=e+"ToggleClose",d=a+"Caret",u=a+"Wrap",p=t.find("."+a),h=p.find("[class^="+o+"]"),f=p.find("[class^="+i+"]"),g=t.find("."+c),_=f.find("."+l),m=f.find("."+r),v=f.find("[class^="+d+"]");0===n.length&&(n=$("<div>").addClass("j-backplate").css({position:"absolute",display:"none",top:0,right:0,bottom:0,left:0,"z-index":Math.max(0,parseInt($(".c-header").css("z-index"),10)-1)}).insertBefore(".c-header").on("click",function(){f.click()})),f.on("click",function(e){e.preventDefault(),t.hasClass(u+s)?(t.removeClass(u+s),p.removeClass(a+s),h.removeClass(o+s),g.removeClass(c+s),f.removeClass(i+s),_.removeClass(l+s),m.removeClass(r+s),v.removeClass(d+s),n.hide()):(t.addClass(u+s),p.addClass(a+s),h.addClass(o+s),g.addClass(c+s),f.addClass(i+s),_.addClass(l+s),m.addClass(r+s),v.addClass(d+s),n.show())})}}function showHideScrollArrow(){var e=$(".c-banner__ScrollArrow"),t=$(".j-headline--alt").first();e.length&&(e.removeClass("h-hidden"),e.offset().top<=t.offset().top+t.height()+10?e.addClass("h-hidden"):e.removeClass("h-hidden"))}function f_set_fadeIns(){var c=$(".j-fadeIn"),t=!1;function e(){var a=getPageYOffset(),e=document.documentElement.clientHeight,o=150<.2*e?150:.2*e,i=a+e+o;t=!1,Akendi.fadeTops.map(function(e,t){var n=c.eq(t);if(window.innerHeight+a>=document.body.offsetHeight)n.css("opacity",1);else if(e<=i&&n.css("opacity")<1){var s=Math.min(1,(i-e-o)/(n.get(0).clientHeight+o));n.css("opacity",s)}})}function n(){t||(t=!0,requestAnimFrame(e))}c.length&&(Akendi.fadeTops=Akendi.fadeTops||c.map(function(e,t){return $(t).offset().top}).get(),c.css("opacity",0),$(window).on("scroll",n),requestAnimFrame(n))}function f_set_socialHover(){function e(e){var t="iconCircle";$(".c-social__"+e+", .c-blog__ShareLink img[src*="+e+"]").hover(function(){setImgSrc($(this),t+e+".svg")},function(){setImgSrc($(this),t+e+"Blue.svg")})}e("LinkedIn"),e("Facebook"),e("Twitter"),e("Instagram"),e("YouTube"),e("GooglePlus")}function setImgSrc(e,t){var n=e.attr("src"),s=n.substring(0,n.lastIndexOf("/")+1);e.attr("src",s+t)}function f_set_buttonToggles(){$("body").on("click",".c-button__Toggle",function(e){doToggle($(this),e)})}function f_set_dropdownToggles(){$("body").on("click",".c-dropdown",function(e){var t=$(this).find("[class*=Toggle]");t.length&&doToggle(t,e)})}function doToggle(e,t){var n=(e=e.first()).attr("data-toggle"),s=e.find("[class*=Caret]"),a=e.attr("data-extra");if(s.length&&s.toggleClass("j-open"),void 0!==n){var o=$("#"+n);if(o.length){void 0!==a&&"mainNav"===a&&setNavExtraStyles(o);var i="false"==e.attr("aria-expanded")?"true":"false",c=$("#AkendiFSTopNav");if(e.attr("aria-expanded",i),0<c.length&&"mainNav"===a)"none"!==window.getComputedStyle(c.get(0)).getPropertyValue("display")?c.fadeOut({complete:function(){$(this).removeClass("j-open")}}):(c.css("opacity",0),c.addClass("j-open"),c.animate({opacity:1}));else o.toggleClass("j-open");e.find(".c-nav__Open, .c-nav__Close").toggle(),t.stopPropagation()}}}function setFixedPadding(e){if(isMaxSM()){var t=1024,n=134,s=!0,a=0;isMobi()?(s=!1,t=320,n=42):isMaxXS()&&(t=640,n=100),s&&(a=(getClientWidth()-t)/2),$(e).css("padding-left",a+n/2+"px")}}function setNavExtraStyles(e){var t="AkendiFSTopNav",n=$("#"+t);isMaxSM()?0===n.length&&((n=e.clone()).attr("id",t),n.find(".c-nav__Sites > button").attr("data-toggle","AkendiFStopNavSitesList").end().find("#topNavSitesList").attr("id","AkendiFStopNavSitesList"),n.addClass("c-nav__TopNav--popup"),setFixedPadding(n),$("body").append(n)):0!==n.length&&n.remove()}function f_set_truncationDecorators(){var e=$("<div>abcdefghijklmnopqrstuvwxyz0123456789</div>"),t=$("<div>abcdefghijklmnopqrstuvwxyz0123456789</div>");e.css({position:"absolute",left:"-99999px","font-family":"Times New Roman","font-size":"12px"}),t.css({position:"absolute",left:"-99999px","font-family":"Akkurat, Times New Roman","font-size":"12px"}),$("body").append(e.add(t));var n=setInterval(function(){var x;e.get(0).getBoundingClientRect().width!==t.get(0).getBoundingClientRect().width&&(clearInterval(n),e.add(t).remove(),x=$('<span class="c-decorator">…</span>'),$("[class*=ellips]").each(function(){$(this).find(".c-decorator").remove();var e=$(this).data("origText");void 0===e?(e=$(this).text(),$(this).data("origText",e)):$(this).text(e);var t=$(this).data("cloneId");void 0===t?((t=$(this).clone()).removeClass("j-ellipse"),t.css({position:"absolute",left:"-99999px"}),$("body").append(t),Akendi.truncateClones.push(t),$(this).data("cloneId",Akendi.truncateClones.length-1)):t=Akendi.truncateClones[t],t.text(e);var n=$(this).get(0).getBoundingClientRect(),s=$(this).text(),a=[],o={};s=(s=s.replace(/\n/g,"")).replace(/\s+/g," ");for(var i=t.css({"font-size":$(this).css("font-size"),"font-family":$(this).css("font-family"),"font-weight":$(this).css("font-weight"),"line-height":$(this).css("line-height"),"letter-spacing":$(this).css("letter-spacing"),width:n.width+"px","max-height":"none"}).get(0).getBoundingClientRect(),c=s.length;1<c;c--){var l=s.substring(0,c-1);$(this).hasClass("c-categoryList__ItemText--careers")||(l=-1!==s.indexOf("/")?l.replace(/^([^/]+)/,"<span class='c-announcement__Date'>$1</span>"):"<span class='c-announcement__Date'>"+l+"</span>");var r=t.html(l).get(0).getBoundingClientRect().height;(!a.length||r<a[a.length-1])&&(a.push(r),o[r]=c)}var d,u,p=-1;if(n.height<i.height){for(c=0;c<a.length;c++)if(a[c]<=n.height){var h=s.substring(0,o[a[c]]);$(this).hasClass("c-categoryList__ItemText--careers")||(h=-1!==h.indexOf("/")?h.replace(/^([^/]+)/,"<span class='c-announcement__Date'>$1</span>"):"<span class='c-announcement__Date'>"+h+"</span>"),h+="&hellip;",t.html(h);var f="";if(t.get(0).getBoundingClientRect().height<=n.height)p=s.substring(0,a[c]);else if(c<a.length-1){var g=(f=s.substring(0,o[a[c+1]])).lastIndexOf("-"),_=f.lastIndexOf(" "),m=o[a[c+1]];g<_?(f=s.substring(0,_+1),m=_+1):_<g&&(f=s.substring(0,g+1),m=g+1);for(var v=m,C=m-1,k=/[.!?,;-]/,b=!0;b;){var w=!1;do{var A=s[v];null===A.match(k)&&null===A.match(/\s/)||(w=!0),v++}while(!w&&(0<c&&v<o[a[c-1]]||v<s.length));v>=s.length||0<c&&v>=o[a[c-1]]?b=!1:(h=s.substring(0,v).trim(),$(this).hasClass("c-categoryList__ItemText--careers")||(h=-1!==h.indexOf("/")?h.replace(/^([^/]+)/,"<span class='c-announcement__Date'>$1</span>"):"<span class='c-announcement__Date'>"+h+"</span>"),h+="&hellip;",t.html(h),t.get(0).getBoundingClientRect().height>n.height?(v=C,b=!1):C=v)}p=s.substring(0,v)}if(-1!==p)return u=(u=$(this).hasClass("c-categoryList__ItemText--careers")?p:p.replace(/^([^/]+)/,"<span class='c-announcement__Date'>$1</span>")).trim(),$(this).html(u).append(x.clone()),0}return t.text(s.substring(0,o[a[a.length-1]])),-1!==(p=truncateSingleLine(this,t))?(d=p,u=(u=$(this).hasClass("c-categoryList__ItemText--careers")?d:d.replace(/^([^/]+)/,"<span class='c-announcement__Date'>$1</span>")).trim(),$(this).html(p).append(x.clone()),0):-1}}),Akendi.truncateReady=!0)},1e3/60)}function truncateSingleLine(e,t,n){void 0===n&&(n=!1);var s=t.text(),a=$(e).get(0).getBoundingClientRect(),o=[];t.css({width:"auto"});for(var i=s.length;1<i;i--){var c=s.substring(0,i-1);n&&(c=-1!==c.indexOf("/")?c.replace(/^([^/]+)/,"<span class='c-announcement__Date'>$1</span>"):"<span class='c-announcement__Date'>"+c+"</span>");var l=t.html(c).get(0).getBoundingClientRect().width;if((!o.length||l!==o[o.length-1])&&l<=a.width&&(t.html(c+'<span class="c-decorator">&hellip;</span>'),(l=t.get(0).getBoundingClientRect().width)<=a.width))return c}return-1}function scrollToY(s,e,a){var o=window.scrollY||document.documentElement.scrollTop,i=0;s=s||0,e=e||2e3,a=a||"easeOutSine";var c=Math.max(.1,Math.min(Math.abs(o-s)/e,.8)),l={easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)}};!function e(){var t=(i+=1/60)/c,n=l[a](t);t<1?(requestAnimFrame(e),window.scrollTo(0,o+(s-o)*n)):window.scrollTo(0,s)}()}function f_set_homePagingButton(){var o=$(".c-banner");if(o.length){var e=$(".c-banner__ScrollArrow");e.length&&e.on("click",function(){var e=getPageYOffset(),t=o.height()+1,n=360;if(getClientWidth()<1024)n=230;else{var s=document.createElement("div");s.style.position="absolute",s.style.left="-9999px",s.className="c-header c-header--minimized",document.body.appendChild(s);var a=parseInt(window.getComputedStyle(s).getPropertyValue("min-height"),10);document.body.removeChild(s),t+=a}e<n?scrollToY(n,1100,"easeOutSine"):e<t&&scrollToY(t,1100,"easeOutSine")})}}function f_set_navHeight(){var e=$("body > div.container").height();$("#myMenuX").css({height:e+"px"})}function f_navArrow(e){if($(e).hasClass("selected")){var t=!0;$(e).hasClass("stg_testing")&&($(e).removeClass("stg_testing").addClass("sel_stg_testing"),t=!1),$(e).hasClass("stg_strategy")&&($(e).removeClass("stg_strategy").addClass("sel_stg_strategy"),t=!1),$(e).hasClass("stg_research")&&($(e).removeClass("stg_research").addClass("sel_stg_research"),t=!1),$(e).hasClass("stg_design")&&($(e).removeClass("stg_design").addClass("sel_stg_design"),t=!1),$(e).hasClass("stg_constr")&&($(e).removeClass("stg_constr").addClass("sel_stg_constr"),t=!1),t&&$(e).addClass("sel_common")}}function f_viewSet(){$(".xx_office_image").removeClass("xx_office_image").addClass("office_image"),$(".xx_pf_image").removeClass("xx_pf_image").addClass("pf_image"),$(".xx_pf_image2").removeClass("xx_pf_image2").addClass("pf_image2"),$(".office_image").each(function(){f_viewUpd($(this),"office_image")}),$(".pf_image").each(function(){f_viewUpd($(this),"pf_image")}),$(".pf_image2").each(function(){f_viewUpd($(this),"pf_image2")}),f_set_portfolio()}function f_viewUpd(e,t){var n=e.width();e.children().hasClass("top_l")&&(n+=180),e.children().hasClass("bot_l")&&(n+=180),e.offset().left+n>mx&&e.removeClass(t).addClass("xx_"+t)}function f_showServiceFullList(e,t){$(t).css({top:"0px",left:"-210px",display:"block"});var n=$(t).height(),s=$(e).parent().offset(),a=$(t).offset(),o=s.top-a.top+90-n/2,i=n/2-8;$(t).css({top:o+"px",left:"-210px"}),$(".rt_arrow",t).css({top:i+"px"}),$(t).hasClass("visible")||$(t).addClass("visible"),$(".CloseBtn",t).off().click(function(){$(t).removeClass("visible"),setTimeout(function(){$(t).css({display:"none"})},500)})}function f_set_portfolio(){void 0!==jQuery.fn.hoverIntent&&($(".xx_office_image").hoverIntent(function(){},function(){}),$(".xx_pf_image").hoverIntent(function(){},function(){}),$(".xx_pf_image2").hoverIntent(function(){},function(){}),$(".pf_image").hoverIntent(function(){$(this).css("z-index",50),$("div.pf_slide",this).hasClass("top_l")&&$(this).filter(":not(:animated)").animate({width:"350px",height:"350px"}),$("div.pf_slide",this).hasClass("top_r")&&($(this).filter(":not(:animated)").animate({left:"-=180",width:"350px",height:"350px"}),$("div.pf_bg",this).filter(":not(:animated)").animate({left:"+=180"})),$("div.pf_slide",this).hasClass("bot_l")&&($(this).filter(":not(:animated)").animate({top:"-=180",width:"350px",height:"350px"}),$("div.pf_bg",this).filter(":not(:animated)").animate({top:"+=180"})),$("div.pf_slide",this).hasClass("bot_r")&&($(this).filter(":not(:animated)").animate({top:"-=180",left:"-=180",width:"350px",height:"350px"}),$("div.pf_bg",this).filter(":not(:animated)").animate({top:"+=180",left:"+=180"})),$("div.pf_slide",this).filter(":not(:animated)").animate({top:"0",left:"0"})},function(){var e;$("div.pf_slide",this).hasClass("top_l")&&($(this).animate({width:"170px",height:"170px"}),$("div.pf_slide",this).animate({top:"-350px",left:"-350px"})),$("div.pf_slide",this).hasClass("top_r")&&($(this).animate({left:"+=180",width:"170px",height:"170px"}),$("div.pf_slide",this).animate({top:"-350px",left:"170px"}),$("div.pf_bg",this).animate({left:"-=180"})),$("div.pf_slide",this).hasClass("bot_l")&&($(this).animate({top:"+=180",width:"170px",height:"170px"}),$("div.pf_slide",this).animate({top:"170px",left:"-350px"}),$("div.pf_bg",this).animate({top:"-=180"})),$("div.pf_slide",this).hasClass("bot_r")&&($(this).animate({top:"+=180",left:"+=180",width:"170px",height:"170px"}),$("div.pf_slide",this).animate({top:"170px",left:"170px"}),$("div.pf_bg",this).animate({top:"-=180",left:"-=180"})),e=$(this),setTimeout(function(){$(e).css("z-index",1)},1e3)}),$(".pf_image2").hoverIntent(function(){$(this).css("z-index",50),$("div.pf_slide",this).filter(":not(:animated)").animate({top:"0",left:"0"})},function(){$(this).css("z-index",1),$("div.pf_slide",this).hasClass("top_l")&&$("div.pf_slide",this).animate({top:"-350px",left:"-350px"}),$("div.pf_slide",this).hasClass("top_r")&&$("div.pf_slide",this).animate({top:"-350px",left:"350px"}),$("div.pf_slide",this).hasClass("bot_l")&&$("div.pf_slide",this).animate({top:"350px",left:"-350px"}),$("div.pf_slide",this).hasClass("bot_r")&&$("div.pf_slide",this).animate({top:"350px",left:"350px"})}),$(".pf_fade").hoverIntent(function(){if(!$(this).parent().hasClass("faded")){var e=$(this).parent(),t=$("div.pf_over",this);e.css({"z-index":"50",overflow:"visible"});var n=e.position(),s=n.top,a=n.left,o=t.width(),i=t.height(),c=$(e.parent()).width()-$(e).css("marginLeft").replace("px",""),l=$(e.parent()).height()-10;c<a+o?t.css("left",c-(a+o+10)):t.css("left","-10px"),l<s+i&&0<l-i?t.css("top",l-(s+i+10)):t.css("top","-10px"),$("div.pf_over",this).css("opacity","1")}},function(){$("div.pf_over",this).css("opacity","0");var e=$(this).parent();setTimeout(function(){e.css({"z-index":1,overflow:"hidden"})},500)}))}Akendi.truncateClones=[],Akendi.truncateReady=!1,Akendi.headHoverTimeout=null,Akendi.lastScrollPos=0,Akendi.tapEvent=document.createEvent("MouseEvents"),document.body.addEventListener("touchstart",function(e){Akendi.touchX=e.changedTouches[0].screenX,Akendi.touchY=e.changedTouches[0].screenY,Akendi.touchStarted=!0,Akendi.tapEnded=!1,Akendi.tapStarted=!0}),document.body.addEventListener("touchmove",function(e){Akendi.touchX=e.changedTouches[0].screenX,Akendi.touchY=e.changedTouches[0].screenY,Akendi.tapEnded=!1,Akendi.tapStarted=!1}),document.body.addEventListener("touchend",function(e){var t=e.changedTouches[0];Akendi.tapStarted&&Akendi.touchX===t.screenX&&Akendi.touchY===t.screenY&&(Akendi.tapEvent.initMouseEvent("akenditap",!0,!0,e.target.ownerDocument.defaultView,0,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e.target.dispatchEvent(Akendi.tapEvent),(e.target.classList.contains("c-clientsList__List")||e.target.classList.contains("c-clientsList__Title")||e.target.classList.contains("c-clientsList__Toggle"))&&e.preventDefault()),Akendi.touchStarted=!1,Akendi.tapStarted=!1,Akendi.tapEnded=!0}),document.body.addEventListener("touchcancel",function(){Akendi.touchStarted=!1,Akendi.tapEnded=!1,Akendi.tapStarted=!1}),document.createElement("office_caption"),document.createElement("img_caption"),document.createElement("main_msg-01"),document.createElement("main_msg"),document.createElement("info_msg"),document.createElement("msg_soon"),document.createElement("msg_box"),document.createElement("event_month"),document.createElement("event_date"),document.createElement("event_time"),document.createElement("reg_btn"),document.createElement("msg_pic"),document.createElement("info_sm"),document.createElement("lets_msg"),document.createElement("about_msg"),document.createElement("sub_msg"),document.createElement("cont_msg"),document.createElement("event_year"),document.createElement("event_day"),document.createElement("event_venue"),document.createElement("event_mnth"),document.createElement("faq_reply"),document.createElement("orange"),$(document).ready(function(c){Akendi.cache="object"==typeof Akendi.cache?Akendi.cache:{},Akendi.cache.hasContents=c(".contents").length,Akendi.cache.hasContainer=c("body > div.container").length,Akendi.cache.projCarousel=c("#projectsCarousel"),Akendi.cache.workHomeCarousel=c("#workHomeCarousel"),Akendi.cache.carouselOver=c(".c-projectsCarousel__OverlaySlide"),Akendi.cache.recentProjImg=c(".c-projectsCarousel__RecentProj"),Akendi.cache.topLevelCategories=c(".c-nav__TopLevelCat, .c-nav__TopLevelSubCat"),Akendi.cache.logoBlue=new Image,Akendi.cache.logoWhite=new Image;var e="https://www.akendi.ca"+(location.port?":"+location.port:""),t="/include/common/images/img2017";Akendi.cache.logoBlue.src=e+t+"/akendiLogoBlue.svg",Akendi.cache.logoWhite.src=e+t+"/akendiLogoWhite.svg";var n=c(".contents");if(n.length){var s=n.offset();mx=s.left+n.width()}f_viewSet(),c("#logo").click(function(){window.location=c("#hid_link_home").val()}),c("#tb_btn_cont").click(function(){window.location=c("#hid_link_cont").val()}),0<c(".css-label").length&&c(".css-label").click(function(){c(this).toggleClass("css-label-checked")}),0<c(".slick_projects_slider").length&&c(".slick_projects_slider").each(function(){c(this).slick({infinite:!1,slidesToShow:4,slidesToScroll:1})});if(0<c(".newsEvents__slider").length){var a=c(".newsEvents__slider").not(".slick-initialized"),o={infinite:!1,initialSlide:0,slidesToShow:1,slidesToScroll:1,prevArrow:c("#slickSlider_Prev"),nextArrow:c("#slickSlider_Next")};a.each(function(){var e=c(this),t={},n=e.next().find(".c-newsNav__Box").eq(0);e.hasClass("j-mobile")?c.extend(t,o,{appendDots:n,centerPadding:0,arrows:!1,dots:!0,dotsClass:"c-newsNav__Dots",variableWidth:!0,adaptiveHeight:!0}):c.extend(t,o,{slidesToShow:3,slidesToScroll:3,rows:1,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2,rows:1}},{breakpoint:1804,settings:{slidesToShow:1,slidesToScroll:1,rows:2}}]}),e.slick(t)})}if(0<c("#projectsCarousel--mobile").length){var i=c("#projectsCarousel--mobile");i.slick({infinite:!1,slidesToShow:1,slidesToScroll:1,initialSlide:0,centerPadding:0,arrows:!1,dots:!0,dotsClass:"c-projectsCarousel__Dots",variableWidth:!0}),i.on("click",".slick-slide",function(e){c(this).hasClass("slick-current")||(e.preventDefault(),e.stopPropagation(),i.slick("slickNext"))}),i.on("click",".slick-slide .c-relatedProjects__Link, .slick-slide .c-relatedProjects__Link--first",function(e){c(this).parents(".slick-slide").hasClass("slick-current")||e.preventDefault()})}var l=c('a[href="'+c("#hid_link_this").val()+'"]').parent().not(".j-allCourses");c(l).addClass("selected");var r=c(l).parent();if(0<r.length&&c(r).hasClass("sf-menu")&&(c(l).children("ul").addClass("current"),c(l).addClass("parent sfHover")),0<r.length&&!c(r).hasClass("sf-menu")){c(r).addClass("current"),c(r).parent().addClass("parent current"),c(l).find("ul").addClass("current"),c(l).addClass("parent current"),f_navArrow(l);var d=c(r).parent().parent();0<d.length&&!c(d).hasClass("sf-menu")&&(c(d).addClass("current"),c(d).parent().addClass("parent current"))}c("#menu_btn").hide();var u,p=c("ul.sf-menu");p.length&&p.superfish({onBeforeShow:function(){var e=c(this).parent().position(),t=parseInt(c(this).parent().css("margin-top"),10),n="0px 0 0 0";if(null!==e){var s=e.top+t;c(this).css({visibility:"hidden",display:"block"});var a=c(this).children("li"),o=a[a.length-1].getBoundingClientRect().bottom-a[0].getBoundingClientRect().top,i=window.innerHeight-c("div.header").eq(0).height();if(c(this).css({visibility:"visible",display:"none"}),i-o<=0)s=window.scrollY+2;else i<s+o&&(s=window.scrollY+(i-o))<0&&(s=0);n=s+"px 0 0 0"}c(this).css({position:"absolute",top:"0px",padding:n})},animation:{opacity:"show"},speed:"slow",dropShadows:!1,pathClass:"current",pathLevels:3,delay:800}),f_set_navHeight(),void 0!==c(window).smartresize&&c(window).smartresize(function(){if(Akendi.cache.hasContents){var e=c(".contents"),t=e.offset().left+e.width();mx!=t&&(mx=t,f_viewSet())}Akendi.cache.hasContainer&&f_set_navHeight();var n=document.querySelector(".j-backToTop__Trigger");null!==n&&(Akendi.bTTShowPos=n.getBoundingClientRect().bottom+getPageYOffset()),Akendi.cache.carouselOver.not(".c-relatedProjects__Overlay").each(function(e){var t=c(this).attr("data-for"),n=c("#"+t).position(),s=null!=n?n.left:0;0<e&&(s+=10),c(this).css({left:s+"px"})}),updateProjectsCarousel(),Akendi.truncateReady&&(Akendi.truncateReady=!1,f_set_truncationDecorators()),retinajs(Akendi.cache.recentProjImg),showHideScrollArrow(),0<c("#AkendiFSTopNav").length&&setFixedPadding(c("#AkendiFSTopNav")),checkWorkElementsOrder(),manageClientsListToggle(),manageWorkCarouselOnResize()}),"function"==typeof f_setform_training_notify&&(f_setform_training_notify(),c("input[type=checkbox][value="+c("#default_city").val()+"]").attr("checked",!0),c("label[for="+c("input[type=checkbox][value="+c("#default_city").val()+"]").attr("id")+"]").addClass("css-label-checked")),"undefined"!=typeof Pace&&Pace.on("done",function(){setTimeout(function(){c("body").fadeIn(2e3)},1)}),void 0!==window.retinajs&&window.retinajs(),configureProjectsCarousel(),c(".c-button__ShowHide, .button__showHide").on("click",function(e){e.preventDefault(),c(this).add(c(this).parent().find("[class^=c-section__Group]")).toggleClass("in")}),c(".popupLink").on("click",function(e){e.preventDefault();var t=c(this).attr("data-embed"),n=t.split("?")[1].split("=")[1];t.length&&(t=encodeURIComponent(t).replace(/%2f/gi,"/").replace(/%3f/i,"?").replace(/%3d/i,"="),dc_lightbox(t,1,1),"undefined"!=typeof ga&&ga("send","pageview",n))}),c(".newsBox__imgLink").hover(function(){c(this).parent().find(".newsBox__Title").addClass("forceHover")},function(){c(this).parent().find(".newsBox__Title").removeClass("forceHover")}),c(".newsBox__Title").hover(function(){c(this).parents(".newsBox").find(".newsBox__imgLink").addClass("forceHover")},function(){c(this).parents(".newsBox").find(".newsBox__imgLink").removeClass("forceHover")}),c(".pageBanner__imgBox").hover(function(){c(this).parent().find(".pageBanner__contentBox__Title").addClass("forceHover")},function(){c(this).parent().find(".pageBanner__contentBox__Title").removeClass("forceHover")}),c(".pageBanner__contentBox__Title").hover(function(){c(this).parents(".pageBanner").find(".pageBanner__imgBox").addClass("forceHover")},function(){c(this).parents(".pageBanner").find(".pageBanner__imgBox").removeClass("forceHover")}),c("[data-linkId]").each(function(){c(this).hover(function(){var e=c("#"+c(this).attr("data-linkId"));e.length&&c(e).addClass("j-forceHover")},function(){var e=c("#"+c(this).attr("data-linkId"));e.length&&c(e).removeClass("j-forceHover")})}),(u=c("#footerHello, #footerContactUs")).hover(function(){u.not(this).addClass("forceHover")},function(){u.not(this).removeClass("forceHover")}),c(".j-exploreCareers").on("click",function(){window.location.href="careers/"});var h=[".jumboDiv__nav__link",".c-jumboDiv__navLink",".c-section__LinkRow > a",".c-workPageTitle__Button",".c-workCaseStudy__Instruction"];c(h.join(",")).on("click",function(e){smoothScrollAnchor(c(this))&&e.preventDefault()}),c((h=[".newsBox__imgLink",".newsBox__Title",".newsBox__imgLink",".newsBox__Title"]).join(",")).on("click",function(){this.blur()}),f_set_homePagingButton(),f_set_truncationDecorators(),c(window).on("click",function(){c(".j-open").closest("[aria-expanded=true]").attr("aria-expanded","false"),c(".c-nav__Toggle").find(".c-nav__Open").show().siblings(".c-nav__Close").hide(),c(".j-open").each(function(){"AkendiFSTopNav"===c(this).attr("id")?c(this).fadeOut({complete:function(){c(this).removeClass("j-open")}}):c(this).removeClass("j-open")})}),f_set_dropdownToggles(),f_set_buttonToggles(),f_set_mobileClientsToggle(),f_set_socialHover(),f_set_fadeIns(),f_set_subNavToggle(),f_set_headerMinScrollWatch(),f_set_minNavToggle();var f=c(".c-nav__Toggle");f.length&&mqTabletSM.addListener(function(){isMaxSM()||setNavExtraStyles(c("#"+f.attr("data-toggle")))});var g=c(".c-section__AccordionPanel > a");0<g.length&&g.each(function(){c(this).on("click",function(e){e.preventDefault(),c(this).next(".c-section__AccordionExpansion").slideToggle("slow")})}),initTabletBannerScrollFades(),setNavCloseFocusHandler(),setLockElementsOnScrollWatcher(),handleFlatAccordionToggles(),handleSubNavHoverOrTouch(),handleClearHeaderSpace(),handleTeamIconHover(),handleTeamImgHover(),handleCustomDropdownClick(),handleContactValidity(),initPopups(),"function"==typeof Akendi.setTopPhotoBg&&Akendi.setTopPhotoBg(),setWorkLeftNavStickyWatcher(),manageClientsListToggle(),handleBackToTopDisplay(),checkWorkElementsOrder(),makeWorkCarousel(),attachGATrackingToDownloads()}),Akendi.debounce=function(n,s,a){var o;return function(){var e=this,t=arguments;o?clearTimeout(o):a&&n.apply(e,t),o=setTimeout(function(){a||n.apply(e,t),o=null},s||100)}},function(t){jQuery.fn[t]=function(e){return e?this.bind("resize",Akendi.debounce(e)):this.trigger(t)}}((jQuery,"smartresize"));